# Proxy

------

로그인 정보 (세션, 토큰) 도 프록시가 전송을 해주나?

서버를 여러 대로 나눈다 (Sacle out)은 메서드도 분리되어 있는 건가?

## 프록시란?

![https://velog.velcdn.com/images/younghyun/post/961f8e28-0f5d-4868-a7b1-da2d81f54902/image.png](https://velog.velcdn.com/images/younghyun/post/961f8e28-0f5d-4868-a7b1-da2d81f54902/image.png)

- ‘대리’, ‘대신’이라는 뜻을 가지며, 프로토콜에 있어서는 응답 등에서 사용하는 개념이다
- 클라이언트와 서버 사이에 존재하며, 중계기로서 대리로 통신을 수행하는 것을 `Proxy`라고 하며, 그 중계 기능을 하는 주체를 `Proxy Server`라고 한다

## 프록시 서버의 종류

### Forward Proxy

![https://velog.velcdn.com/images/younghyun/post/8a3571b5-9c48-4523-95fe-3bd1815e1392/image.png](https://velog.velcdn.com/images/younghyun/post/8a3571b5-9c48-4523-95fe-3bd1815e1392/image.png)

- 보통 우리가 말하는 프록시가 바로 이 포워드 프록시를 말한다

**캐싱**

- 클라이언트의 요청을 프록시 서버 캐시에 저장하고 같은 요청이 들어온다면 서버를 거치지 않고 바로 응답을 해줌
  - 전송 시간 절약이 가능하다
  - 불필요한 외부 전송을 하지 않아도 된다
  - 외부 요청을 감소 시킨다 → 네트워크 병목 현상 방지

**익명성**

- 클라이언트의 요청을 중계 서버를 거쳐서 보내기 때문에 Server는 누가 요청을 보냈는지 알 수 없음 → Server가 받은 요청 IP는 사용자 IP가 아닌 Proxy Server IP

### Reverse Proxy

![https://velog.velcdn.com/images/younghyun/post/502ef92e-211f-4c9f-b3f6-9b58abe3392b/image.png](https://velog.velcdn.com/images/younghyun/post/502ef92e-211f-4c9f-b3f6-9b58abe3392b/image.png)

- 포워드 프록시와 마찬가지로 요청과 응답이 Proxy Server로 이동하는데, 포워드 프록시와 다르게 서버들이 주로 내부망으로 구성되며 프록시에게만 연결을 허용한다.
- 즉, 서비스를 위한 보안 채널을 구축한다
- 이런 경우 클라이언트가 서버에 직접 접근이 불가능하므로, 리버스 프록시에 요청을 적극적으로 중계하는 `Load Balancing`의 역할을 수행하기도 한다.
- 리버스 프록시 역시 서버를 감추는 익명성을 지니고 있다

## 프록시 서버를 사용하는 이유

### 1. 개인정보를 보호할 수 있다

프록시 서버 없이 클라이언트가 서버에 요청 시 본인의 IP 주소가 노출되는데, 프록시 서버를 사용하면 서버측에서 나의 IP가 아닌 프록시 서버의 IP를 보게 된다

### 2. 캐시를 사용해서 속도가 향상된다

프록시 서버는 웹페이지를 가져올 때 자신의 DB에 최근 데이터를 저장하는데, 이것을 Cache라고 한다.

이렇게 될 시, 같은 요청이 들어오면 Cache 자원을 반환하여 서비스의 속도를 높이고 대역폭도 줄일 수 있다.

### 3. 로그를 기록, 관리할 수 있다

서버 측에선 클라리언트의 기록대신 프록시 서버의 기록만 있지만, 프록시 서버에겐 클라이언트의 기록이 남아있다.

이 기록들을 보면 어떤 IP에서 어떤 IP로 얼마나 접속해 있는지 확인할 수 있고, 특정 IP가 방문할 수 있는 웹사이트도 제한할 수 있어서 회사에서 많이 사용한다

### 4. 접속을 우회할 수 있다

특정 사이트에서 IP를 검사해 한국에서의 접속을 차단하는 경우가 있는데, 이런 경우 프록시 서버를 사용해 접속 시 다른나라에서 접속한 것처럼 우회할 수 있다.

> Proxy Chaining
>
> 클라이언트의 IP를 숨기기 위해 여러 프록시 서버를 경유하는 기술이다
>
> 이렇게 사용하더라도 프록시 서버를 계속하여 추척하면 클라리언트를 찾아낼 수 있겠지만, 여러 국가를 경유하며 우회하면 알아내기 어렵다

### Reference

https://velog.io/@younghyun/프록시Proxy란