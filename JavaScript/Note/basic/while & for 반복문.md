# while & for 반복문

## 구성 요소 생략하기

**구성요소**

| begin     | i = 0    | 반복문에 진입할 때 단 한 번 실행됩니다.                      |
| --------- | -------- | ------------------------------------------------------------ |
| condition | i < 3    | 반복마다 해당 조건이 확인됩니다. false이면 반복문을 멈춥니다. |
| body      | alert(i) | condition이 truthy일 동안 계속해서 실행됩니다.               |
| step      | i++      | 각 반복의 body가 실행된 이후에 실행됩니다.                   |

`for` 문의 구성 요소를 생략하는 것도 가능하다.

반복문이 시작될 때 아무것도 할 필요가 없으면 `begin`을 생략하는 것이 가능.

```jsx
let i = 0; 

for(; i < 3; i++) {
	alert(i);
}
```

`step` 역시 생략할 수 있다.

```jsx
let i = 0;
for (; i < 3;) {
	alert( i++ );
}
```

위와 같이 `for`문을 구성하면 `while (i < 3)`과 동일해진다.

모든 구성 요소를 생략할 수도 있는데, 이렇게 되면 무한 반복문이 만들어진다.

## 반복문 빠져나오기

대개는 반복문의 조건이 falsy가 되면 반복문이 종료된다.

그런데 특별한 지시자인 `break`를 사용하면 언제든 원하는 때에 반복문을 빠져나올 수 있다.

아래 예시의 반복문은 사용자에게 일련의 숫자를 입력하도록 안내하고, 사용자가 아무런 값도 입력하지 않으면 반복문을 ‘종료’한다.

```jsx
let sum = 0;
while (true) {
	let value = +prompt("숫자를 입력하세요.", ''); 
   **// + 단항 연산자로 문자형을 숫자형으로 변환**
	if (!value) break;
	sum += value;
	
}
alert( '합계: ' + sum );
```

위 `break`는 사용자가 아무것도 입력하지 않거나 `Cancel` 버튼을 눌렀을 때 활성화된다. 이때 반복문이 즉시 중단되고 제어 흐름이 반복문 아래 첫 번째 줄로 이동한다. 여기선 `alert`이 그 첫 번째 줄이 된다.

반복문의 시작 지점이나 끝 지점에서 조건을 확인하는 것이 아니라 본문 가운데 혹은 본문 여러 곳에서 조건을 확인 해야 하는 경우, ‘무한 반복문 + break’ 조합을 사용하면 좋다.

## 다음 반복으로 넘어가기

**‘?’ 오른쪽엔 `break`나 `continue`가 올 수 없습니다.**

표현식이 아닌 문법 구조(syntax construct)는 삼항 연산자 `?`에 사용할 수 없다는 점을 항상 유의. 특히 `break`나 `continue` 같은 지시자는 삼항 연산자에 사용하면 안 된다.

```jsx
(i > 5) ? alert(i) : continue; // 여기에 continue를 사용하면 안 됩니다.
```

이런 코드는 문법 에러를 발생시킨다.

# [break/continue와 레이블](https://ko.javascript.info/while-for#ref-1761)

여러 개의 중첩 반복문을 한 번에 빠져나와야 하는 경우가 종종 생기곤 한다.

`i`와 `j`를 반복하면서 프롬프트 창에 `(0,0)`부터 `(2,2)`까지를 구성하는 좌표 `(i, j)`를 입력하게 해주는 예시를 살펴보자.

```jsx
for (let i = 0; i < 3; i++) {

  for (let j = 0; j < 3; j++) {

    let input = prompt(`(${i},${j})의 값`, '');

    // 여기서 멈춰서 아래쪽의 `완료!`가 출력되게 하려면 어떻게 해야 할까요?
  }
}

alert('완료!');
```

사용자가 `Cancel` 버튼을 눌렀을 때 반복문을 중단시킬 방법이 필요하다.

`input` 아래에 평범한 `break` 지시자를 사용하면 안쪽에 있는 반복문만 빠져나올 수 있다. 이것만으론 충분하지 않다(중첩 반복문을 포함한 반복문 두 개 모두를 빠져나와야 하기 때문이죠 – 옮긴이). 이럴 때 레이블을 사용할 수 있다.

*레이블(label)* 은 반복문 앞에 콜론과 함께 쓰이는 식별자다.

```jsx
labelName: for (...) {
  ...
}
```

반복문 안에서 `break <labelName>`문을 사용하면 레이블에 해당하는 반복문을 빠져나올 수 있다.

```jsx
***outer:*** for (let i = 0; i < 3; i++) {

  for (let j = 0; j < 3; j++) {

    let input = prompt(`(${i},${j})의 값`, '');

    // 사용자가 아무것도 입력하지 않거나 Cancel 버튼을 누르면 두 반복문 모두를 빠져나옵니다.
    if (!input) *break outer*; // (*)

    // 입력받은 값을 가지고 무언가를 함
  }
}
alert('완료!');
```

위 예시에서 `break outer`는 `outer`라는 레이블이 붙은 반복문을 찾고, 해당 반복문을 빠져나오게 해준다.

따라서 제어 흐름이 `(*)`에서 `alert('완료!')`로 바로 바뀐다.

레이블을 별도의 줄에 써주는 것도 가능하다.

> **레이블은 마음대로 ‘점프’할 수 있게 해주지 않는다.**
>
> 레이블을 사용한다고 해서 원하는 곳으로 마음대로 점프할 수 있는 것이 아니다.
>
> ```jsx
> break label; // 아래 for 문으로 점프할 수 없습니다.
> 
> label: for (...)
> ```
>
> `break`와 `continue`는 반복문 안에서만 사용할 수 있고, 레이블은 반복시 `break`이나 `continue`지시자 위에 있어야 한다.

## 요약

지금까지 세 종류의 반복문에 대해 살펴보았다.

- `while` – 각 반복이 시작하기 전에 조건을 확인한다.
- `do..while` – 각 반복이 끝난 후에 조건을 확인한다.
- `for (;;)` – 각 반복이 시작하기 전에 조건을 확인한다. 추가 세팅을 할 수 있다.

‘무한’ 반복문은 보통 `while(true)`를 써서 만듭니다. 무한 반복문은 여타 반복문과 마찬가지로 `break` 지시자를 사용해 멈출 수 있다.

현재 실행 중인 반복에서 더는 무언가를 하지 않고 다음 반복으로 넘어가고 싶다면 `continue` 지시자를 사용할 수 있다.

반복문 앞에 레이블을 붙이고, `break/continue`에 이 레이블을 함께 사용할 수 있다. 레이블은 중첩 반복문을 빠져나와 바깥의 반복문으로 갈 수 있게 해주는 유일한 방법이다.

문제

두 경우 모두 **`0`부터 `4`까지** 출력됩니다.

```jsx
for (let i = 0; i < 5; ++i) alert( i );

for (let i = 0; i < 5; i++) alert( i );
```

`for`문의 알고리즘을 떠올려보면 쉽게 추론할 수 있는 문제입니다.

1. 모든 작업이 시작되기 전 일단 `i = 0`입니다.
2. `i < 5` 조건을 만족하는지 확인합니다.
3. 위 조건이 `true`이면 반복문의 본문 `alert(i)`가 실행되고, 그 이후 `i++`가 실행됩니다.

`i++`는 위 알고리즘의 두 번째 단계(조건 확인)와 별개로 실행됩니다. 전혀 다른 구문이기 때문이죠.

증가 연산자가 반환하는 값은 (2) 에서 쓰이지 않기 때문에 `i++`와 `++i`에 차이가 없습니다.

```jsx
let num;

do {
  num = prompt("100을 초과하는 숫자를 입력해주세요.", 0);
} while (num <= 100 && num);
```

`do..while`반복문을 사용해 아래 두 조건이 모두 truthy인 경우 프롬프트 창이 뜨게 하면 됩니다.

1. `num <= 100`인지 확인하기. `100`보다 작거나 같은 값을 입력한 경우 프롬프트 창이 떠야 합니다.
2. `num`이 `null`이나 빈 문자열인지 확인하기. `num`이 `null`이나 빈 문자열이면 `&& num`이 거짓이 되므로 `while` 반복문이 종료됩니다.

**참고:** `num`이 `null`인 경우 `num <= 100`은 `true`가 되므로 두 번째 조건이 없으면 취소 버튼을 눌러도 반복문이 계속해서 실행됩니다. 따라서 위 두 조건을 모두 확인해야 합니다.