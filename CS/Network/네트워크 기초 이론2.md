# 네트워크 기초 이론2

## 12. WAS, JVM, RESTful API

### 웹(WEB)서버란 무엇일까?

- 사전적 의미
  - 웹 서버 (하드웨어) : WEB 서버가 설치되어 있는 컴퓨터
  - 웹 서버 (소프트웨어) : 클라이언트로부터 HTTP 요청을 받아 정적 컨텐츠 (HTML, IMG, CSS 등) 를 제공하는 컴퓨터 프로그램
- 개념
  - 정적 컨텐츠 제공 : WAS를 거치지 않고 바로 자원을 제공
  - 동적 컨텐츠 제공 : 클라이언의 request를 WAS에 보내기
- 정적, 동적 컨텐츠란?
  - 정적 컨텐츠(static) :변화가 없는 컨텐츠, 어느 사용자에게나 동일한 결과값을 보여줌 (HTML, IMG, CSS 등)
  - 동적 컨텐츠 (dynamic) : 배너 광고나 카테고리 등 모두가 볼 수 있어야 하는 컨텐츠는 정적으로 두고, 마이페이지나 장바구니 등 사용자 맞춤형 정보를 제공해야 할 때에는 동적 컨텐츠를 사용 (DB, 비즈니스 로직)
- 종류
  - Apache Server
  - Nginx
  - IIS
  - WebToB

### 웹 애플리케이션 서버(WAS, Web Applicaiton Server)란?

- 개념
  - DB 조회나 로직 처리를 요구하는 동적 컨텐츠를 제공하기 위해 만들어진 Application Server
  - **Web Container** 혹은 **Servlet Container** 라고도 불린다
  - Container란 JSP, Servlet을 실행시킬 수 있는 소프트웨어를 말한다
- 기능
  - 프로그램 실행 환경과 DB 접속 기능 제공
  - 여러 개의 트랜잭션 관리 기능
  - 업무 처리하는 비느지스 로직 수행
  - ex) **Tomcat**, Websphere, Weblogic, Jeus, JBoss, Resin 등

![https://velog.velcdn.com/images%2Fdeveloperjun0615%2Fpost%2F580cc763-4b90-40ea-92c8-b738185089eb%2Fimage.png](https://velog.velcdn.com/images%2Fdeveloperjun0615%2Fpost%2F580cc763-4b90-40ea-92c8-b738185089eb%2Fimage.png)

### WAS의 종류와 특징

- Tomcat 기능
  - JSP/Servlet Container 중 하나로 사용자에게 JSP 요청을 받으면 Servlet으로 바꾸어 실행
  - Web Server에서 요청한 동적 페이지를 읽어 프로그램을 실행
  - 그 결과를 다시 HTML로 재구성하여 Web Server 에게 전달
- Tomcat의 특징
  - Servlet Container를 지원함
  - 플랫폼에 제약이 없음 (Windows, Linux, Unix 등)

### Servlet 이란?

- 개념

  - 클라이언트의 요청을 처리하고, 그 결과를 반환하는 Servlet 클래스의 구현 규칙을 지킨 자바 웹 프로그래밍 기술
  - Java를 사용하여 웹을 만들기 위해 필요한 기술
  - 클라잉너트가 어떠한 요청을 하면 그에 대한 결과를 다시 전송해주는 역학을 하는 Java 프로그램

- 특징

  - 클라이언트의 요청에 대해 동적으로 작동하는 웹 애플리케이션 컴포넌트
  - HTML을 사용하여 요청에 등답한다
  - Java Thread를 이용하여 동작한다
  - MVC 패턴에서 Controller로 이용된다
  - HTTP 프로토콜 서비스를 지원하는 javax.servlet.httpHTTPServlet 클래스를 상속받는다

  “

  ![https://velog.velcdn.com/images%2Fdeveloperjun0615%2Fpost%2F5b1a84ef-e29c-49be-ae12-2e597c5c68af%2F2021-11-03_15-16-59.png](https://velog.velcdn.com/images%2Fdeveloperjun0615%2Fpost%2F5b1a84ef-e29c-49be-ae12-2e597c5c68af%2F2021-11-03_15-16-59.png)

- 동작방식

1. 사용자(클라리언트)가 URL을 입력하면 HTTP Request가 Servlet Container로 전송한다
2. 요청을 전송받은 Servlet Container는 HttpServletRequest, HttpServletResponse 객체를 생성한다
3. web.xml을 기반으로 사용자가 요청한 URL이 어느 Servlet에 대한 요청인지 찾는다
4. 해당 Servlet에서 service 메소드를 호출한 후 클라이언트의 Get, POST 여부에 따라 doGet() 또는 doPost()를 호출한다
5. doGet() 또는 doPost() 메소드는 동적 페이지를 생성한 후 HttpServletResponse 객체에 응답을 보낸다
6. 응답이 끝나면 HttpServletRequest, HttpServletResponse 두 객체를 소멸시킨다

### Servelt Container 란?

- 서버에 서블릿을 만들었다고 해서 스스로 작동하는 것이 아니라 서블릿을 관리해주는 것이 필요한데, 그 역학을 하는 것이 바로 서블릿 컨테이너
- 서블릿은 실제 행동을 수행하고, 서블릿 컨테이너는 클라이언트의 요청을 받아주고 응답할 수 있게, 웹서버와 소켓으로 통신하며 대표적인 예로 Tomcat이 있다
- 톰캣은 실제로 웹 서버와 통신하며 JSP와 Servlet이 작동하는 환경을 제공해준다

### JSP (Java Server Page)

- 개념
  - Java 코드가 들어가 있는 HTML 코드
- 특징
  - Servlet은 자바 소스코드 속에 HTML 코드가 들어가 있는 형태인데, JSP는 이와 반대로 HTML 소스코드 속에 자바 소스코드가 들어가는 구조를 갖는 웹 애플리케이션 프로그래밍 기술이다
  - JSP는 WAS에 의하여 서블릿 클래스로 변환되어 사용된다

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f9ea015f-56f6-42c3-9566-e9b0c9906d26/Untitled.png)

- JSP 동작 구조

1. 웹 서버가 사용자로부터 서블릿에 대한 요청을 받으면 서블릿 컨테이너에 그 요청을 넘긴다.
2. 요청을 받은 컨테이너는 HttpRequest와 HttpResponse 객체를 만들어, 이들을 통해 서블릿 doPost()나 doGet() 메소드 중 하나를 호출한다
3. 만약 서블릿만 사용하여 사용자가 요청한 웹페이지를 보여주려면 out 객체의 println 메소드를 사용하여 HTML 문서를 작성해야 하는데 이는 추가/수정을 어렵게 하고, 가독성도 떨어지기 때문에 JSP를 사용하여 비즈니스 로직과 프레젠테이션 로직을 분리한다
4. 여기서 서블릿은 데이터의 입력, 수정 등에 대한 제어를 JSP에게 넘겨서 프레젠테이션 로직을 수행한 후 컨테이너에게 Response를 전달
5. 이렇게 만들어진 결과물은 해당 페이지를 요청하면 컴파일이 되어 자바파일을 통해 .class 파일이 만들어지고, 두 로직이 결합되어 클래스화 되는 것을 확인할 수 있다.